# vi 使用教程

## vi、vim的区别


vim 是vi的升级版本，它不仅兼容vi的所有指令，而且还有一些新的特性在里面。

## vi、vim的三种命令模式


【注意】：不同的教程可能三种模式的名字不同。

### 指令模式

【介绍】：使用vi/vim打开一个文件直接进入指令模式，也就是默认的模式。

【操作】：

| 命令      | 功能                             |
| :-------- | :------------------------------- |
| x         | 删除字符                         |
| dd        | 删除（剪切）某行                 |
| ndd       | 删除（剪切）当前开始的n行        |
| yy        | 复制当前所在行                   |
| nyy       | 复制当前开始的n行                |
| p（小写） | 在当前所在行下一行插入剪切板内容 |
| P（大写） | 在当前所在行上一行插入剪切内容   |
| u         | 撤销上一步操作                   |
| ctrl+r    | 回复撤销操作                     |

### 编辑模式

【介绍】：a）按下i、I、o、O、a、A任何一个按键之后可进入编辑模式；b）按下ESC键退出编辑模式，进入指令模式。

【操作】：

| 命令 | 功能                          |
| :--- | :---------------------------- |
| i    | 在当前字符前插入              |
| I    | 在光标所在行的行首插入        |
| a    | 在当前字符后插入              |
| A    | 在光标所在行的行尾插入        |
| o    | 在当前行的下一行插入新的一行  |
| O    | 在当前行的上一行插入新的 一行 |

### 命令行模式（末行模式）

【介绍】：在指令模式下输入 ：、/ 、？三个中的任何一个，都可以进入命令行模式，也就是将光标转移到vi编辑器最底下一行。

【操作】：

| 命令 | 功能                                               |
| :--- | :------------------------------------------------- |
| :w   | 保存文本                                           |
| :q   | 退出vi/vim                                         |
| :w!  | 强制保存，在root用户下，即使文件只读也可以完成保存 |
| :q!  | 强制退出，所有改动不生效                           |
| :wq  | 保存退出                                           |

### 三种模式之间的关系



## vi、vim命字符查找命令


注意：以下操作由【指令模式】下进入【命令行模式】。

### / 命令

【命令格式】：/string，string为要查找的字符。

【命令作用】：光标处开始向后寻找字符串 string。向后就是向光标所在位置处行数增大的方向寻找。

### ？命令

【命令格式】：？string，string为要查找的字符。

【命令作用】：光标处开始向前寻找字符串 string。向前就是光标所在位置的

### n 命令 

重复上一条检索命令。上次向前查找，使用n命令后也是再次向前查找；上次向后查找，使用n命令后也是再次向后查找。

### N 命令

以相反的方向查找上次查找的字符串。也就是上次向后查找string，使用N命令后向前查找string；上次向前查找string，使用N命令后向后查找string。